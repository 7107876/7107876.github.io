System.register("chunks:///_virtual/uiBattleWin.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UserDataManager.ts","./MulRewardConfig.ts","./NumberStringTool.ts","./uiChangeBattle.ts","./GameModule.ts"],(function(e){"use strict";var t,n,i,r,a,o,l,u,s,c,h,f,d,p,g,w,R,m,b,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.defineProperty},function(e){o=e.cclegacy,l=e._decorator,u=e.Node,s=e.Event,c=e.Label,h=e.RichText,f=e.js,d=e.Animation,p=e.Vec3,g=e.Component},function(e){w=e.default},function(e){R=e.default},function(e){m=e.NumberStringTool},function(e){b=e.uiChangeBattle},function(e){v=e.GameModule}],execute:function(){var y,C,M,B,A,G,N,T,x,I,P,z,D,L,E,S,k;o._RF.push({},"00420KLqfNOG60/wg/UnYqB","uiBattleWin",void 0);var F=l.ccclass,_=l.property;e("uiBattleWin",(y=F("uiBattleWin"),C=_({type:u}),M=_({type:u}),B=_({type:u}),A=_({type:u}),G=_({type:u}),N=_({type:u}),T=_({type:u}),y((P=t((I=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(r(t),"uiChangeBattle",P,r(t)),i(r(t),"txtBaseReward",z,r(t)),i(r(t),"mulRewardArray",D,r(t)),i(r(t),"txtMulReward",L,r(t)),i(r(t),"btnNoThanks",E,r(t)),i(r(t),"txtGold",S,r(t)),i(r(t),"levelrewardEffect",k,r(t)),a(r(t),"curMulPer",0),a(r(t),"isMulAD",!1),t}n(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){this.onRefreshMulPer()},o.onRestart=function(){this.isMulAD||w.Instance.onLevelPassReward();var e=new s("onGameRestart",!0);this.node.dispatchEvent(e),this.node.active=!1,this.uiChangeBattle.active=!0,this.uiChangeBattle.getComponent(b).onChangeHide()},o.onRefresh=function(){this.txtBaseReward.getComponent(c).string=m.Instance.formatNumberToString(w.Instance.getcurLevelBaseReward())},o.onRefreshGold=function(){var e=w.Instance.goldcount;this.txtGold.getComponent(c).string=m.Instance.formatNumberToString(e)},o.onRefreshMulPer=function(){var e=w.Instance.getcurLevelBaseReward(),t=this.mulRewardArray.eulerAngles.z,n=R.Instance.GetMulRewardCfg(t);if(null!=n){var i=Math.ceil(e*n.perRote);this.curMulPer=n.perRote;this.txtMulReward.getComponent(h).string=f.formatStr("<outline color=#0 width=2><color=#CCCC29>+%s</color></outline>",m.Instance.formatNumberToString(i))}},o.onEnable=function(){this.uiChangeBattle.active=!1,this.isMulAD=!1,this.onRefresh(),this.onRefreshGold(),this.mulRewardArray.parent.getComponent(d).play(),this.btnNoThanks.active=!1,this.schedule((function(){this.isMulAD||(this.btnNoThanks.active=!0)}),2,0,0)},o.onADMulReward=function(){this.mulRewardArray.parent.getComponent(d).stop(),this.onLevelRewardForMul()},o.onLevelRewardForMul=function(){v.ReplayParticl(this.levelrewardEffect),this.isMulAD=!0,this.onGetMulReward(),this.onRefreshGold(),this.btnNoThanks.active=!1,this.schedule((function(){this.onuiShowEnd()}),2,0,0)},o.onuiShowEnd=function(){if(this.node.active){v.FlyItem(new p(0,0),new p(414,879));var e=new s("onGameRestart",!0);this.node.dispatchEvent(e),this.node.active=!1,this.uiChangeBattle.active=!0,this.uiChangeBattle.getComponent(b).onChangeHide()}},o.onGetMulReward=function(){w.Instance.onLevelPassReward(this.curMulPer)},t}(g)).prototype,"uiChangeBattle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"txtBaseReward",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"mulRewardArray",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(I.prototype,"txtMulReward",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(I.prototype,"btnNoThanks",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(I.prototype,"txtGold",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(I.prototype,"levelrewardEffect",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=I))||x));o._RF.pop()}}}));

System.register("chunks:///_virtual/SoundManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UserDataManager.ts"],(function(n){"use strict";var e,o,t,a,i,u,r,s,l,c,d,p;return{setters:[function(n){e=n.defineProperty,o=n.inheritsLoose,t=n.createClass},function(n){a=n.cclegacy,i=n._decorator,u=n.AudioSource,r=n.loader,s=n.AudioClip,l=n.Node,c=n.find,d=n.Component},function(n){p=n.default}],execute:function(){var f,g,v;a._RF.push({},"0d2a250m6tFk68s5fFS0iLO","SoundManager",void 0);var S=i.ccclass;i.property,n("SoundManager",S("SoundManager")((v=g=function(n){function e(){return n.apply(this,arguments)||this}o(e,n);var a=e.prototype;return a.start=function(){},a.OnPlaySound=function(n,e){if(p.Instance.bSoundEnabel){var o="sound/"+e+".wav";console.log("播放音效:"+o),this.initSoundClip(o,n)}else{var t=n.getComponent(u);null!=t&&(t.clip=null)}},a.initSoundClip=function(n,e){var o=this;r.loadRes(n,s,(function(t,a){t?console.log(t.message||t):(console.log("资源加载成功！！！"+n),o.playsound(e,a))}))},a.playsound=function(n,e){var o=n.getComponent(u);null==o&&(o=n.addComponent(u)),o.clip=e,o.play()},t(e,null,[{key:"Instance",get:function(){if(null==this.instance){var n=new l,o=c("Game");n.parent=o,n.name="SoundManager",this.instance=n.addComponent(e)}return this.instance}}]),e}(d),e(g,"instance",null),f=v))||f);a._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComponent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts"],(function(t){"use strict";var e,n,o,i,r,s,a,l,c,h,d,u,p,f,g,G,N;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,s=t.v2,a=t.Button,l=t.ScrollView,c=t.Sprite,h=t.Node,d=t.RichText,u=t.Label,p=t.Color,f=t.ProgressBar,g=t.Slider,G=t.Component},function(t){N=t.ResManager}],execute:function(){var v;i._RF.push({},"0d9244nxBlBwpiVn/nYir0F","BaseComponent",void 0);var _=r.ccclass;r.property,t("default",_(v=function(t){function i(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(o(e),"data",null),n(o(e),"all_note",[]),e}e(i,t);var r=i.prototype;return r.Get_All_Note=function(){this.all_note=[],this.Get_Note(this.node)},r.onLoad=function(){this.Get_All_Note()},r.Init=function(){this.Get_All_Note()},r.Get_Note=function(t){this.all_note[t.name]=t;var e=t.children.length;if(e>0)for(var n=0;n<e;n++){var o=t.children[n];this.all_note[o.name]=o,this.Get_Note(o)}},r.GetNode=function(t){return this.all_note&&this.all_note.hasOwnProperty(t)?this.all_note[t]:null},r.GetObject=function(t,e){return this.GetNode(t).getComponent(e)},r.GetPosition=function(t){var e=this.GetNode(t);return s(e.position.x,e.position.y)},r.GetBtn=function(t){return this.GetNode(t).getComponent(a)},r.GetScrollView=function(t){return this.GetNode(t).getComponent(l)},r.IsActive=function(t){var e=this.GetNode(t);return e&&e.active},r.SetImg=function(t,e,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var i=this.GetNode(t).getComponent(c);N.SetSprite(e,i),i.trim=o,i.sizeMode=n?c.SizeMode.TRIMMED:c.SizeMode.CUSTOM},r.SetClick=function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];o&&(o.length>1?this.GetNode(t).attr({data:o}):1==o.length&&this.GetNode(t).attr({data:o[0]})),this.GetNode(t).on(h.EventType.TOUCH_END,e,this,!0)},r.SetText=function(t,e){this.GetNode(t).getComponent(d)&&(this.GetNode(t).getComponent(d).string=e.toString()),this.GetNode(t).getComponent(u)&&(this.GetNode(t).getComponent(u).string=e.toString())},r.SetTextColor=function(t,e){void 0===e&&(e=p.WHITE),this.GetNode(t).getComponent(u)&&(this.GetNode(t).getComponent(u).color=e)},r.SetProgress=function(t,e){this.GetNode(t)&&(this.GetNode(t).getComponent(f).progress=e)},r.SetSlider=function(t,e,n){void 0===n&&(n=!1);var o=this.GetNode(t).getComponent(g);o&&(o.enabled=n,o.progress=e)},r.SetActive=function(t,e){this.GetNode(t).active=e},r.SetInteractable=function(t,e){this.GetBtn(t).interactable=e},i}(G))||v);i._RF.pop()}}}));

System.register("chunks:///_virtual/SoundTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SoundManager.ts"],(function(n){"use strict";var t,e,o,i,r,u,a,c;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){r=n.cclegacy,u=n._decorator,a=n.Component},function(n){c=n.SoundManager}],execute:function(){var l,s,d,p,f;r._RF.push({},"103c5HJyxhI97zyklnFinzJ","SoundTool",void 0);var y=u.ccclass,h=u.property;n("SoundTool",y("SoundTool")((d=t((s=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return t=n.call.apply(n,[this].concat(r))||this,o(i(t),"soundName",d,i(t)),o(i(t),"ButtonClick",p,i(t)),o(i(t),"NodeActive",f,i(t)),t}e(t,n);var r=t.prototype;return r.start=function(){this.NodeActive&&this.onPlaySound()},r.onEnable=function(){this.NodeActive&&this.onPlaySound()},r.onPlaySound=function(){""!=this.soundName&&c.Instance.OnPlaySound(this.node,this.soundName)},t}(a)).prototype,"soundName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=t(s.prototype,"ButtonClick",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=t(s.prototype,"NodeActive",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=s))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/TestAI_Long.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SKillConfig.ts","./AIBase.ts","./GameLogicData.ts","./moveTotarget.ts"],(function(t){"use strict";var e,n,o,i,a,s,r,l,c,u,h,d,f;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,s=t.SkeletalAnimation,r=t.instantiate,l=t.loader,c=t.Prefab},function(t){u=t.default},function(t){h=t.AIBase},function(t){d=t.default},function(t){f=t.moveTotarget}],execute:function(){var p;i._RF.push({},"14101B0SwVDw5jlZfSNI/EI","TestAI_Long",void 0);var g=a.ccclass;a.property,t("TestAI_Long",g("TestAI_Long")(p=function(t){function i(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(o(e),"template_array",null),n(o(e),"aniClips",void 0),n(o(e),"TeamIndex",void 0),e}e(i,t);var a=i.prototype;return a.onLoad=function(){this.getComponent(s);this.attactDis=3,this.attacktime=.5},a.start=function(){this.initAI(),this.onLoadArrayObj(),this.playAction(0,!1),this.starttime=0},a.update=function(t){if(d.Instance.bGameStart)return null==this.targetNode?(this.onAI(),void this.lookAtObject()):void(this.IsDied()||(this._ismovestate?this.moveTo(t):this.onAttackAI(t)))},a.onAI=function(){this.targetNode=this.GetCloseTarget()},a.onAttack=function(){if(d.Instance.bGameStart)if(null!=this.template_array&&null!=this.targetNode){var t=r(this.template_array);t.parent=this.node.parent,t.position=this.node.getPosition(),t.getComponent(f).targetNode=this.targetNode,t.getComponent(f).srcNode=this.node;var e=u.Instance.Get(this.skillId);t.getComponent(f).movespeed=e.flyspeed,t.active=!0}else null==this.template_array?console.log("没有加载技能对象"):null==this.targetNode&&this.onAI()},a.onLoadArrayObj=function(){var t=u.Instance.Get(this.skillId);null==t&&console.log("技能配置为空:"+this.skillId);var e="Prefab/"+t.SkillPrefab+".prefab",n=this;l.loadRes(e,c,(function(t,o){t?console.log(t.message||t):(console.log("资源加载成功！！！"+e),o.createNode((function(t,e){var o=r(e);o.parent=n.node,n.template_array=o})))}))},i}(h))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/TestConfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var e,o,t,s;return{setters:[function(n){e=n.createClass,o=n.defineProperty},function(n){t=n.cclegacy,s=n.loader}],execute:function(){t._RF.push({},"17ea189QhhNUr0UB1LVMgS5","TestConfig",void 0);var r=n("default",function(){function n(){o(this,"configLoad",!1)}return n.prototype.onLoad=function(){var n=this;s.loadRes("config/TestConfig.json",(function(e,o){console.log(o);var t=o,s=t.json;if(Array.isArray(s)){var r=Array.from(s);console.log(r.length);for(var i=0;i<r.length;i++)console.log("ID:"+t.json[i].ID+" Name:"+t.json[i].Name);n.configLoad=!0}}))},e(n,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new n),this.instance}}]),n}());o(r,"instance",null),t._RF.pop()}}}));

System.register("chunks:///_virtual/ResManager.ts",["cc"],(function(e){"use strict";var r,s,t;return{setters:[function(e){r=e.cclegacy,s=e.resources,t=e.SpriteFrame}],execute:function(){var n;e("ResManager",void 0),r._RF.push({},"1e340vbXQ9Jz5w5DkrCygi6","ResManager",void 0),(n||(n=e("ResManager",{}))).SetSprite=function(e,r){console.log("加载图片资源:"+e),s.load(e,t,(function(e,s){e?console.log(e.message||e):r.spriteFrame=s}))},r._RF.pop()}}}));

System.register("chunks:///_virtual/ShapeBarTest.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./NumberStringTool.ts","./ReferenceCollector.ts","./AIBase.ts"],(function(e){"use strict";var t,a,o,n,r,i,s,d,l,p,h,c,u,m,g,f,v,B,b;return{setters:[function(e){t=e.inheritsLoose,a=e.defineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,i=e.find,s=e.CameraComponent,d=e.loader,l=e.Prefab,p=e.Sprite,h=e.Color,c=e.Vec3,u=e.ProgressBar,m=e.instantiate,g=e.Label,f=e.Component},function(e){v=e.NumberStringTool},function(e){B=e.ReferenceCollector},function(e){b=e.AIBase}],execute:function(){var C;n._RF.push({},"44d888SKP9PKayJ9N5yj9I8","ShapeBarTest",void 0);var y=r.ccclass;r.property,e("ShapeBarTest",y("ShapeBarTest")(C=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,a(o(t),"shapebar",void 0),a(o(t),"_camera",void 0),a(o(t),"teamid",void 0),a(o(t),"aiBase",void 0),a(o(t),"addgoldPanel",void 0),a(o(t),"template_addgold",void 0),t}t(n,e);var r=n.prototype;return r.onLoad=function(){var e=i("Game/3D/Camera/Main Camera");this._camera=e.getComponent(s),this.teamid=this.node.getComponent(b)._team,this.aiBase=this.node.getComponent(b)},r.start=function(){this.initShapeBar()},r.update=function(e){null!=this.shapebar&&(this.onUpdateBarPos(),this.onRefreshBar())},r.initShapeBar=function(){var e=this;d.loadRes("UI/template_liftbar.prefab",l,(function(t,a){t?console.log(t.message||t):(console.log("资源加载成功！！！"),a.createNode((function(t,a){i("Game/2D/Canvas/LiftBarRoot").addChild(a),e.shapebar=a;var o=a.getChildByName("Bar").getComponent(p);0==e.teamid?o.color=h.GREEN:o.color=h.RED;var n=a.getComponent(B);e.addgoldPanel=n.get("addgoldpanel"),e.template_addgold=n.get("template_addgold")})))}))},r.onDestroy=function(){null!=this.shapebar&&this.shapebar.destroy()},r.onUpdateBarPos=function(){var e=new c(0,0,0);this._camera.convertToUINode(this.node.worldPosition,this.shapebar.parent,e),this.shapebar.position=e},r.onRefreshBar=function(){this.shapebar.getComponent(u).progress=this.aiBase.CurHp/this.aiBase.MaxHp,this.aiBase.IsDied()&&(this.shapebar.active=!1)},r.onDestroyBar=function(){null!=this.shapebar&&this.shapebar.destroy(),this.enabled=!1},r.onShapeGoldGive=function(e){var t=m(this.template_addgold);t.parent=this.addgoldPanel,t.setPosition(c.ZERO),t.active=!0,t.getComponent(B).get("txtGold").getComponent(g).string="$"+v.Instance.formatNumberToString(e)},n}(f))||C);n._RF.pop()}}}));

System.register("chunks:///_virtual/ShapeConfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var i,o,t,e;return{setters:[function(n){i=n.createClass,o=n.defineProperty},function(n){t=n.cclegacy,e=n.loader}],execute:function(){t._RF.push({},"4b57cFlxRRFE6iroazevRtB","ShapeConfig",void 0);var s=function(){o(this,"ID",void 0),o(this,"Name",void 0),o(this,"Prefab",void 0),o(this,"icon",void 0),o(this,"lockicon",void 0),o(this,"Hp",void 0),o(this,"Atk",void 0),o(this,"skillid",void 0),o(this,"nextShpe",void 0)},r=n("default",function(){function n(){o(this,"Configs",null),o(this,"configLoad",!1)}var t=n.prototype;return t.onLoad=function(){this.Configs=new Array;var n=this;e.loadRes("config/ShapeConfig.json",(function(i,o){console.log(o);var t=o,e=t.json;if(Array.isArray(e)){var r=Array.from(e);console.log(r.length);for(var a=0;a<r.length;a++){var h=new s;h.ID=t.json[a].ID,h.Name=t.json[a].Name,h.Prefab=t.json[a].Prefab,h.icon=t.json[a].icon,h.lockicon=t.json[a].lockicon,h.Hp=t.json[a].Hp,h.Atk=t.json[a].atk,h.skillid=t.json[a].skillid,h.nextShpe=t.json[a].NextShape,n.Configs.push(h)}n.configLoad=!0}}))},t.Get=function(n){for(var i=0;i<this.Configs.length;i++)if(this.Configs[i].ID==n)return this.Configs[i];return null},t.GetLongShapes=function(){for(var n=new Array,i=0;i<this.Configs.length;i++)1==this.getShapeTypeById(this.Configs[i].ID)&&n.push(this.Configs[i]);return n},t.GetGongShapes=function(){for(var n=new Array,i=0;i<this.Configs.length;i++)2==this.getShapeTypeById(this.Configs[i].ID)&&n.push(this.Configs[i]);return n},t.getShapeTypeById=function(n){var i=Number.parseInt(n);return i>1e3&&i<2e3?1:2},i(n,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new n),this.instance}}]),n}());o(r,"instance",null),t._RF.pop()}}}));

System.register("chunks:///_virtual/LevelConfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var e,t,s,i;return{setters:[function(n){e=n.defineProperty,t=n.createClass},function(n){s=n.cclegacy,i=n.loader}],execute:function(){s._RF.push({},"561591xaZRMm6iExfSFlyTl","LevelConfig",void 0);var o=function(){e(this,"ID",void 0),e(this,"monsters",void 0),e(this,"winReward",void 0),e(this,"loseReward",void 0)},r=n("levelMonster",(function(){e(this,"id",void 0),e(this,"pos",void 0)})),l=n("default",function(){function n(){e(this,"Configs",null),e(this,"configLoad",!1)}var s=n.prototype;return s.onLoad=function(){this.Configs=new Array;var n=this;i.loadRes("config/LevelConfig.json",(function(e,t){console.log(t);var s=t,i=s.json;if(Array.isArray(i)){var r=Array.from(i);console.log(r.length);for(var l=0;l<r.length;l++){var a=new o;a.ID=s.json[l].ID,a.monsters=s.json[l].monsters,a.loseReward=Number.parseInt(s.json[l].loseReward),a.winReward=Number.parseInt(s.json[l].winReward),n.Configs.push(a)}n.configLoad=!0}}))},s.Get=function(n){for(var e=0;e<this.Configs.length;e++)if(this.Configs[e].ID==n)return this.Configs[e];return null},s.GetLastLevel=function(){return this.Configs[this.Configs.length-1]},s.GetLevelMonster=function(n){var e=this.Get(n);null==e&&(e=this.GetLastLevel());for(var t=Array(),s=e.monsters.split(","),i=0;i<s.length;i++){var o=s[i].split("_");if("0"!=o[0]){var l=new r;l.id=o[0],l.pos=Number.parseInt(o[1]),t.push(l)}}return t},t(n,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new n),this.instance}}]),n}());e(l,"instance",null),s._RF.pop()}}}));

System.register("chunks:///_virtual/GameModule.ts",["cc","./GameManager.ts","./BaseComponent.ts"],(function(e){"use strict";var t,n,o,a,i,l,c;return{setters:[function(e){t=e.cclegacy,n=e.Sprite,o=e.tween,a=e.ParticleSystem2D,i=e.loader},function(e){l=e.default},function(e){c=e.default}],execute:function(){var s,u,r;e("GameModule",void 0),t._RF.push({},"746d0uAdtlBAalISlTVYL4Z","GameModule",void 0),u=s||(s=e("GameModule",{})),r=null,u.FlyItem=function(e,t){if(r=r||l.Instance.node.getChildByPath("2D/Canvas/FlyView").getComponent(c)){var a=r.GetNode("FlyGold").getComponentsInChildren(n),i=1;a.forEach((function(n){n.node.active=!0,o(n.node).to(.25*i,{position:t},{easing:"cubicInOut",onComplete:function(){n.node.active=!1,n.node.position=e}}).start(),i++}))}},u.ReplayParticl=function(e){var t=e.getComponentsInChildren(a);console.log(t.length);for(var n=0;n<t.length;n++)t[n].resetSystem()},u.PlayEfx=function(e,t,n){void 0===n&&(n=2),i.loadRes("Efxs/"+e+".prefab",(function(e,o){e?console.log(e.message):o.createNode((function(e,o){o.parent=t,setTimeout((function(){o.destroy()}),1e3*n)}))}))},t._RF.pop()}}}));

System.register("chunks:///_virtual/MulRewardConfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var e,t,o,i,r;return{setters:[function(n){e=n.createClass,t=n.defineProperty},function(n){o=n.cclegacy,i=n.loader,r=n.Vec2}],execute:function(){o._RF.push({},"75667fYjyFEuKcpe+XcDVMG","MulRewardConfig",void 0);var s=function(){t(this,"ID",void 0),t(this,"angleRange",void 0),t(this,"perRote",void 0)},a=n("default",function(){function n(){t(this,"Configs",null),t(this,"configLoad",!1)}var o=n.prototype;return o.onLoad=function(){this.Configs=new Array;var n=this;i.loadRes("config/MulRewardConfig.json",(function(e,t){console.log(t);var o=t,i=o.json;if(Array.isArray(i)){var a=Array.from(i);console.log(a.length);for(var l=0;l<a.length;l++){var u=new s;u.ID=o.json[l].ID;var f=o.json[l].angleRange.toString().split(",");u.angleRange=new r(Number.parseInt(f[0]),Number.parseInt(f[1])),u.perRote=Number.parseFloat(o.json[l].perRote),n.Configs.push(u)}n.configLoad=!0}}))},o.Get=function(n){for(var e=0;e<this.Configs.length;e++)if(this.Configs[e].ID==n)return this.Configs[e];return null},o.GetMulRewardCfg=function(n){for(var e=0;e<this.Configs.length;e++)if(this.Configs[e].angleRange.x>=n&&n>=this.Configs[e].angleRange.y)return this.Configs[e];return console.log("没有找到角度配置:"+n),null},e(n,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new n),this.instance}}]),n}());t(a,"instance",null),o._RF.pop()}}}));

System.register("chunks:///_virtual/uiOutLineReward.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UserDataManager.ts","./NumberStringTool.ts"],(function(t){"use strict";var e,n,i,r,o,a,s,c,l,u,d,p,f,h,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.defineProperty},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,l=t.Label,u=t.UIOpacity,d=t.Vec3,p=t.tween,f=t.Component},function(t){h=t.default},function(t){w=t.NumberStringTool}],execute:function(){var y,g,C,b,_,m,v;a._RF.push({},"75f90C7ghdIYLy8CsBtdCkT","uiOutLineReward",void 0);var I=s.ccclass,R=s.property;t("uiOutLineReward",(y=I("uiOutLineReward"),g=R({type:c}),C=R({type:c}),y((m=e((_=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(r(e),"txt_Reward",m,r(e)),i(r(e),"AniPanel",v,r(e)),o(r(e),"reward_test",2e3),e}n(e,t);var a=e.prototype;return a.start=function(){this.reward_test=h.Instance.GetBuyLongPrice()+h.Instance.GetBuyGongPrice(),this.txt_Reward.getComponent(l).string=w.Instance.formatNumberToString(this.reward_test);var t=this.node.getComponent(u);t.opacity=0,this.node.scale=new d(.4,.4,.4),p(t).to(.3,{opacity:255}).start(),p(this.node).to(.4,{scale:new d(1,1,1)},{easing:"backOut"}).start()},a.onClose=function(){var t=this,e=this.node.getComponent(u);p(e).to(.3,{opacity:0}).start(),p(this.node).to(.4,{scale:new d(.4,.4,.4)},{easing:"backIn",onComplete:function(){t.node.active=!1}}).start()},a.Collect=function(){h.Instance.onGiveOutlineReward(),h.Instance.onCaleGold(this.reward_test),this.onClose()},a.DBCollect=function(){h.Instance.onGiveOutlineReward(),h.Instance.onCaleGold(2*this.reward_test),this.onClose()},a.onEnable=function(){},e}(f)).prototype,"txt_Reward",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(_.prototype,"AniPanel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=_))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/AIBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameGlobConfig.ts","./UserDataManager.ts","./ShapeBarTest.ts","./ShapeConfig.ts","./SKillConfig.ts","./SoundManager.ts","./GameManager.ts","./GameModule.ts"],(function(t){"use strict";var e,i,o,n,s,a,r,l,h,d,c,u,m,p,f,g,v,A,I,y,C,k;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Vec3,r=t.SkinnedMeshRenderer,l=t.AnimationClip,h=t.Color,d=t.SkeletalAnimation,c=t.AnimationComponent,u=t.v3,m=t.v2,p=t.Component},function(t){f=t.default},function(t){g=t.default},function(t){v=t.ShapeBarTest},function(t){A=t.default},function(t){I=t.default},function(t){y=t.SoundManager},function(t){C=t.default},function(t){k=t.GameModule}],execute:function(){var P;n._RF.push({},"761beAYSvxOO40S490hD7+Y","AIBase",void 0);var S=s.ccclass;s.property,t("AIBase",S("AIBase")(P=function(t){function n(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(o(e),"_team",void 0),i(o(e),"targetNode",null),i(o(e),"thismodalId",void 0),i(o(e),"CurHp",void 0),i(o(e),"MaxHp",void 0),i(o(e),"AtkValue",void 0),i(o(e),"curanimationindex",-1),i(o(e),"starttime",void 0),i(o(e),"attacktime",1),i(o(e),"attactDis",2),i(o(e),"_ismovestate",!1),i(o(e),"movespeed",1),i(o(e),"_movedir",a.ZERO),i(o(e),"skillId",void 0),i(o(e),"mats",void 0),i(o(e),"mcs",void 0),e}e(n,t);var s=n.prototype;return s.initAI=function(){this.InitHp(),this.mcs=[],this.mats=[];for(var t=this.getComponentsInChildren(r),e=0;e<t.length;e++)for(var i=t[e],o=0;o<i.materials.length;o++)this.mats.push(i.materials[o]);k.PlayEfx("yanwutexiao",this.node,2)},s.GetCloseTarget=function(){for(var t=C.Instance.getTargetTeam(this._team),e=0,i=null,o=0;o<t.length;o++){if(!t[o].getComponent(n).IsDied()){var s=a.distance(this.node.getWorldPosition(),t[o].getWorldPosition());(null==i||s<e)&&(e=s,i=t[o])}}return i},s.checkAtteckDis=function(){if(null!=this.targetNode&&a.distance(this.targetNode.getWorldPosition(),this.node.getWorldPosition())<=this.attactDis)return!0;return!1},s.onAI=function(){this.targetNode=this.GetCloseTarget()},s.InitHp=function(){var t=A.Instance.Get(this.thismodalId);this.CurHp=this.MaxHp=t.Hp,this.AtkValue=t.Atk},s.IsDied=function(){return this.CurHp<=0},s.onAttackCale=function(t){if(this.CurHp-=t.AtkValue,1==this._team){var e=0;e=this.CurHp>t.AtkValue?t.AtkValue:this.CurHp;var i=Number.parseFloat(f.Instance.Get("13").Value);e=Math.ceil(e*i),g.Instance.onCaleGold(e),this.node.getComponent(v).onShapeGoldGive(e),this.playhitefx()}else this.playhitefx();var o=I.Instance.Get(this.skillId);y.Instance.OnPlaySound(this.node,o.hitSound),C.Instance.onCheckBattleEnd(),this.IsDied()&&this.playAction(3,!1,l.WrapMode.Normal)},s.playhitefx=function(){var t=this;if(null!=this.mats&&!(this.mats.length<1)){for(var e=0;e<this.mats.length;e++){this.mats[e].setProperty("emissive",h.GRAY)}setTimeout((function(){for(var e=0;e<t.mats.length;e++){t.mats[e].setProperty("emissive",h.BLACK)}}),100)}},s.playAction=function(t,e,i){if(void 0===i&&(i=l.WrapMode.Loop),this.curanimationindex!=t){var o=this.getComponent(d),n=o.clips;o.stop(),o.off(c.EventType.LASTFRAME,this.onreturnIdle,this),e&&o.on(c.EventType.LASTFRAME,this.onreturnIdle,this),n[t].wrapMode=i,o.play(n[t].name),this.curanimationindex=t,console.log("设置动画！！！！！！！"+t)}},s.onreturnIdle=function(){this.getComponent(d).off(c.EventType.LASTFRAME,this.onreturnIdle,this),this.IsDied()||this.playAction(0,!1)},s.moveTo=function(t){if(a.distance(this.targetNode.getWorldPosition(),this.node.getWorldPosition())>this.attactDis){this.playAction(1,!1);var e=this.targetNode.getWorldPosition().x-this.node.getWorldPosition().x,i=this.targetNode.getWorldPosition().z-this.node.getWorldPosition().z,o=u(e,0,i).multiplyScalar(this.movespeed);this.node.position=this.node.position.add(o.multiplyScalar(t))}else this.playAction(0,!1),this._ismovestate=!1,this.starttime=100},s.onAttackAI=function(t){this.targetNode.getComponent(n).IsDied()?this.targetNode=null:this.checkAtteckDis()?(this.starttime+=t,this.starttime>=this.attacktime&&(this.lookAtObject(),this.playAction(2,!0),this.starttime=0)):this._ismovestate=!0},s.lookAtObject=function(){var t=this.targetNode.worldPosition.x-this.node.worldPosition.x,e=this.targetNode.worldPosition.z-this.node.worldPosition.z,i=m(t,e).signAngle(m(0,1))/Math.PI*180;this._movedir=new a(0,i,0),this.node.setRotationFromEuler(this._movedir),this._movedir=this._movedir.normalize()},n}(p))||P);n._RF.pop()}}}));

System.register("chunks:///_virtual/SKillConfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var i,o,e,t;return{setters:[function(n){i=n.createClass,o=n.defineProperty},function(n){e=n.cclegacy,t=n.loader}],execute:function(){e._RF.push({},"78d934yA9ZLyog0mHYMeU9n","SKillConfig",void 0);var s=function(){o(this,"ID",void 0),o(this,"Type",void 0),o(this,"Name",void 0),o(this,"SkillPrefab",void 0),o(this,"flyspeed",void 0),o(this,"hitSound",void 0)},r=n("default",function(){function n(){o(this,"Configs",null),o(this,"configLoad",!1)}var e=n.prototype;return e.onLoad=function(){this.Configs=new Array;var n=this;t.loadRes("config/SkillConfig.json",(function(i,o){console.log(o);var e=o,t=e.json;if(Array.isArray(t)){var r=Array.from(t);console.log(r.length);for(var l=0;l<r.length;l++){var f=new s;f.ID=e.json[l].ID,f.Type=e.json[l].Type,f.Name=e.json[l].Name,f.SkillPrefab=e.json[l].SkillPrefab,f.flyspeed=e.json[l].flyspeed,f.hitSound=e.json[l].hitSound,n.Configs.push(f)}n.configLoad=!0}}))},e.Get=function(n){for(var i=0;i<this.Configs.length;i++)if(this.Configs[i].ID==n)return this.Configs[i];return null},i(n,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new n),this.instance}}]),n}());o(r,"instance",null),e._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameGlobConfig.ts","./LevelConfig.ts","./UserDataManager.ts","./MulRewardConfig.ts","./uiChangeBattle.ts","./ShapeBarTest.ts","./ShapeConfig.ts","./SKillConfig.ts","./AIBase.ts","./TestConfig.ts","./GameLogicData.ts","./JsbTool.ts","./uiMain.ts","./uiNewCard.ts","./GameModule.ts"],(function(e){"use strict";var t,n,o,a,i,r,s,l,c,u,h,d,f,m,p,g,y,b,N,I,C,v,T,S,w,B,G,L,P,E,M;return{setters:[function(e){t=e.defineProperty,n=e.applyDecoratedDescriptor,o=e.inheritsLoose,a=e.assertThisInitialized,i=e.initializerDefineProperty,r=e.createClass},function(e){s=e.cclegacy,l=e._decorator,c=e.Node,u=e.loader,h=e.Prefab,d=e.Vec3,f=e.Layers,m=e.tween,p=e.Animation,g=e.Component},function(e){y=e.default},function(e){b=e.default},function(e){N=e.default},function(e){I=e.default},function(e){C=e.uiChangeBattle},function(e){v=e.ShapeBarTest},function(e){T=e.default},function(e){S=e.default},function(e){w=e.AIBase},function(e){B=e.default},function(e){G=e.default},function(e){L=e.JsbTool},function(e){P=e.uiMain},function(e){E=e.uiNewCard},function(e){M=e.GameModule}],execute:function(){var R,_,D,z,O,x,k,A,W,F,U,V,H,J,Q,Z,j,q,K,X,Y,$,ee,te,ne,oe,ae,ie,re,se,le,ce,ue;s._RF.push({},"7a2b8Uf5Q9GG7CZAIHnQn3U","GameManager",void 0);var he=l.ccclass,de=l.property;e("default",(R=he("GameManager"),_=de({type:c}),D=de({type:c}),z=de({type:c}),O=de({type:c}),x=de({type:c}),k=de({type:c}),A=de({type:c}),W=de({type:c}),F=de({type:c}),U=de({type:c}),V=de({type:c}),H=de({type:c}),J=de({type:c}),Q=de({type:E}),R((ue=ce=function(e){function n(){for(var n,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return n=e.call.apply(e,[this].concat(r))||this,t(a(n),"posindex",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"]),i(a(n),"myTeamNode",q,a(n)),i(a(n),"otherTeamNode",K,a(n)),i(a(n),"battleroot",X,a(n)),i(a(n),"editorTile",Y,a(n)),t(a(n),"myTeamNodes",null),t(a(n),"otherTeamNodes",null),i(a(n),"uiMain",$,a(n)),i(a(n),"uiWin",ee,a(n)),i(a(n),"uiLose",te,a(n)),i(a(n),"BtnBattleStart",ne,a(n)),i(a(n),"uiChangeBattle",oe,a(n)),i(a(n),"battleWinEffect",ae,a(n)),i(a(n),"cameranode",ie,a(n)),i(a(n),"uiOutLineReward",re,a(n)),i(a(n),"combShapeEffect",se,a(n)),i(a(n),"uiNewCard",le,a(n)),t(a(n),"battleEnd",!0),t(a(n),"loadConfig",!1),t(a(n),"destoryShapeNode",new Array),n}o(n,e);var s=n.prototype;return s.onLoad=function(){var e=this;n.instance=this,this.node.on("gamestart_event",(function(t){console.log("接受到消息:gamestart_event!!!"),G.Instance.bGameStart=!0,e.onCameraBattleStart(),e.editorTile.active=!1,this.battleEnd=!1,this.BtnBattleStart.active=!1}),this),this.node.on("onGameRestart",(function(t){console.log("接受到消息:onGameRestart!!!"),e.onReInitBattle(),e.editorTile.active=!0}),this),this.node.on("create_long",(function(t){console.log("接受到消息:create_long!!!"),e.OnCreateLong()}),this),this.node.on("create_gong_free",(function(t){console.log("接受到消息:create_gong!!!"),e.onCreateGong(!0)}),this),this.node.on("create_long_free",(function(t){console.log("接受到消息:create_long!!!"),e.OnCreateLong(!0)}),this),this.node.on("create_gong",(function(t){console.log("接受到消息:create_gong!!!"),e.onCreateGong()}),this),this.node.on("updateGold_event",(function(t){console.log("接受到消息:updateGold_event!!!"),e.onRefreshGold()}),this),this.uiMain.active=!1},s.start=function(){this.InitConfig(),this.initStartTile(this.editorTile)},s.GetGameNode=function(){return this.node},s.InitConfig=function(){y.Instance.onLoad(),B.Instance.onLoad(),T.Instance.onLoad(),S.Instance.onLoad(),b.Instance.onLoad(),I.Instance.onLoad(),this.loadConfig=!0},s.checkcfgEnd=function(){this.loadConfig&&B.Instance.configLoad&&T.Instance.configLoad&&S.Instance.configLoad&&y.Instance.configLoad&&b.Instance.configLoad&&I.Instance.configLoad&&(this.loadConfig=!1,N.Instance.init(),this.OnStartGame())},s.OnStartGame=function(){this.onInitBattle(),this.uiMain.getComponent(P).OnRefreshLevel(),this.onRefreshGold(),this.uiMain.active=!0,N.Instance.CheckOutLineReward()&&this.schedule((function(){this.uiOutLineReward.active=!0}),4,0,0),L.Instance.vibration()},s.update=function(e){this.checkcfgEnd()},s.initNewModal=function(e,t,n,o,a){void 0===a&&(a=-1);var i=this;u.loadRes(e,h,(function(r,s){r?console.log(r.message||r):(console.log("资源加载成功！！！"+e),s.createNode((function(r,s){if(r)return console.log("创建实例对象错误"+e),void console.log(r.message||r);console.log("创建实例对象成功"+e),s.parent=null!=t?t:-1!=a?0==o?i.getBasePosForParent(i.myTeamNode,a):i.getBasePosForParent(i.otherTeamNode,a):0==o?i.getEmptyParentNode(i.myTeamNode):i.getEmptyParentNode(i.otherTeamNode),s.setPosition(d.ZERO),0==o&&(s.setRotationFromEuler(new d(0,180,0)),s.layer=f.nameToLayer("editorShape")),s.name=n;var l=T.Instance.Get(n),c=s.getComponent(w);if(null!=c){c.thismodalId=n,c.skillId=l.skillid,0==o?(c._team=0,i.myTeamNodes.push(s)):(c._team=1,i.otherTeamNodes.push(s)),s.addComponent(v);var u=s.getChildByName("outline");null!=u&&(u.active=!0,u.active=!1)}})))}))},s.onInitBattle=function(){this.onCameraBattleReset(),this.myTeamNodes=new Array;for(var e=N.Instance.getBaseShapes(),t=0;t<e.length;t++){var n="Prefab/"+(a=T.Instance.Get(e[t].id)).Prefab+".prefab";this.initNewModal(n,null,a.ID,0,e[t].pos)}var o=N.Instance.GetLevelMonsters();this.otherTeamNodes=new Array;for(t=0;t<o.length;t++){var a,i="Prefab/"+(a=T.Instance.Get(o[t].id)).Prefab+".prefab";this.initNewModal(i,null,a.ID,1,o[t].pos)}},s.getEmptyParentNode=function(e){for(var t=0;t<this.posindex.length;t++){var n=e.getChildByName(this.posindex[t]);if(0==n.children.length)return n}return null},s.getBasePosForParent=function(e,t){var n=e.getChildByName(t.toString());return null==n&&console.log("没有找到位置父节点:"+t),0==n.children.length?n:null},s.getTargetTeam=function(e){return 0==e?this.otherTeamNodes:this.myTeamNodes},s.initStartTile=function(e){for(var t=0;t<this.posindex.length;t++){e.getChildByName(this.posindex[t]).layer=f.nameToLayer("editorTile")}},s.onCombalShape=function(e,t){var n=this,o=T.Instance.Get(t.getComponent(w).thismodalId);return"0"!=o.nextShpe&&(console.log("---合成"),m(e).to(.2,{scale:new d(1.2,1.2,1.2),worldPosition:t.worldPosition},{easing:"quadInOut"}).call((function(){n.onshowCombShapeEffect(t.worldPosition);var a="Prefab/"+T.Instance.Get(o.nextShpe).Prefab+".prefab",i=t.parent,r=Number.parseInt(e.parent.name),s=Number.parseInt(t.parent.name);console.log(e.position),console.log(t.position);var l=n.GetShapeNodeIndex(e);n.myTeamNodes.splice(l,1),N.Instance.delBaseShape(r);var c=n.GetShapeNodeIndex(t);n.myTeamNodes.splice(c,1),N.Instance.delBaseShape(s),e.destroy(),t.destroy(),console.log("生成新的对象:"+o.nextShpe);var u=T.Instance.Get(o.nextShpe);N.Instance.addBaseShape(u.ID,s)&&n.uiNewCard.OnShowNewCard(u.ID),n.initNewModal(a,i,u.ID,0)})).start(),!0)},s.onCheckDestoryShape=function(){if(this.destoryShapeNode.length>0){for(var e=0;e<this.destoryShapeNode.length;e++)this.destoryShapeNode[e].destroy();this.destoryShapeNode.splice(0,this.destoryShapeNode.length),console.log("删除对象成功!!!")}},s.GetShapeNodeIndex=function(e){for(var t=0;t<this.myTeamNodes.length;t++)if(this.myTeamNodes[t]==e)return t;return-1},s.onCheckBattleEnd=function(){if(!this.battleEnd){for(var e=!0,t=!0,n=0;n<this.myTeamNodes.length;n++)this.myTeamNodes[n].getComponent(w).IsDied()||(e=!1);for(n=0;n<this.otherTeamNodes.length;n++)this.otherTeamNodes[n].getComponent(w).IsDied()||(t=!1);(e||t)&&(console.log("===战斗回合结束!!!"),G.Instance.bGameStart=!1,this.battleEnd=!0,t&&(this.battleWinEffect.active=!1,this.battleWinEffect.active=!0,M.ReplayParticl(this.battleWinEffect)),this.schedule((function(){e?this.uiChangeBattle.getComponent(C).onChangeShow(!1):(N.Instance.onPassLevel(),this.uiChangeBattle.getComponent(C).onChangeShow(!0),this.uiMain.getComponent(P).OnRefreshLevel())}),2,0,0))}},s.onReInitBattle=function(){this.onCameraBattleReset();for(var e=0;e<this.myTeamNodes.length;e++)this.myTeamNodes[e].parent=null,this.myTeamNodes[e].destroy();this.myTeamNodes.splice(0,this.myTeamNodes.length);for(e=0;e<this.otherTeamNodes.length;e++)this.otherTeamNodes[e].parent=null,this.otherTeamNodes[e].destroy();this.otherTeamNodes.splice(0,this.otherTeamNodes.length),this.onInitBattle(),this.BtnBattleStart.active=!0},s.OnCreateLong=function(e){if(void 0===e&&(e=!1),N.Instance.onBuylong()||e){var t=this.getEmptyParentNode(this.myTeamNode);if(null!=t){var n=Number.parseInt(t.name),o=y.Instance.Get("2").Value,a=T.Instance.Get(o),i="Prefab/"+a.Prefab+".prefab";this.initNewModal(i,null,a.ID,0,n),N.Instance.addBaseShape(o,n)}}},s.onCreateGong=function(e){if(void 0===e&&(e=!1),N.Instance.onBuygong()||e){var t=this.getEmptyParentNode(this.myTeamNode);if(null!=t){var n=Number.parseInt(t.name),o=y.Instance.Get("3").Value,a=T.Instance.Get(o),i="Prefab/"+a.Prefab+".prefab";this.initNewModal(i,null,a.ID,0,n),N.Instance.addBaseShape(o,n)}}},s.onCameraBattleStart=function(){this.cameranode.getComponent(p).play("CameraStart")},s.onCameraBattleReset=function(){this.cameranode.getComponent(p).play("CameraDefult")},s.onRefreshGold=function(){this.uiMain.getComponent(P).onRefreshGold()},s.onDisable=function(){N.Instance.saveData()},s.onshowCombShapeEffect=function(e){this.combShapeEffect.worldPosition=e,this.combShapeEffect.active=!1,this.combShapeEffect.active=!0},r(n,null,[{key:"Instance",get:function(){return this.instance}}]),n}(g),t(ce,"instance",null),q=n((j=ue).prototype,"myTeamNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(j.prototype,"otherTeamNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(j.prototype,"battleroot",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(j.prototype,"editorTile",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=n(j.prototype,"uiMain",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=n(j.prototype,"uiWin",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=n(j.prototype,"uiLose",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n(j.prototype,"BtnBattleStart",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=n(j.prototype,"uiChangeBattle",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=n(j.prototype,"battleWinEffect",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=n(j.prototype,"cameranode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=n(j.prototype,"uiOutLineReward",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=n(j.prototype,"combShapeEffect",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=n(j.prototype,"uiNewCard",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=j))||Z));s._RF.pop()}}}));

System.register("chunks:///_virtual/JsbTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UserDataManager.ts"],(function(t){"use strict";var n,e,o,s,r,c,i,a;return{setters:[function(t){n=t.defineProperty,e=t.inheritsLoose,o=t.createClass},function(t){s=t.cclegacy,r=t._decorator,c=t.sys,i=t.Component},function(t){a=t.default}],execute:function(){var l,u,f;s._RF.push({},"8bb70brPwVMn6JAIvb9fan1","JsbTool",void 0);var p=r.ccclass;r.property,t("JsbTool",p("JsbTool")((f=u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var s=n.prototype;return s.start=function(){},s.vibration=function(){a.Instance.bVibration&&c.platform===c.Platform.ANDROID&&jsb.reflection.callStaticMethod("com/cocos/game/AppActivity","vibrate","()V")},o(n,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new n),this.instance}}]),n}(i),n(u,"instance",null),l=f))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/shou.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,o,n,i,s,a,u,c,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,a=e.Sprite,u=e.UITransform,c=e.Vec3,l=e.Component}],execute:function(){var p,h,f,y,d;i._RF.push({},"8e96esaq9BIW7wxi/ZrLNPs","shou",void 0);var v=s.ccclass,g=s.property;e("shou",(p=v("shou"),h=g({type:a}),p((d=r((y=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i))||this,o(n(r),"arrayNode",d,n(r)),r}t(r,e);var i=r.prototype;return i.start=function(){},i.update=function(e){this.refreshCurPos()},i.refreshCurPos=function(){var e=this.arrayNode.fillStart*this.arrayNode.getComponent(u).contentSize.height;this.node.setPosition(new c(0,e,0))},r}(l)).prototype,"arrayNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameLogicData.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,a;return{setters:[function(t){n=t.createClass,e=t.defineProperty},function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"8f4ad+zG/VAJaIyF9YmYOOB","GameLogicData",void 0);var c=t("default",function(){function t(){e(this,"bGameStart",!1)}return n(t,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new t),this.instance}}]),t}());e(c,"instance",null),a._RF.pop()}}}));

System.register("chunks:///_virtual/ModalAITool.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AIBase.ts","./TestAI_close.ts"],(function(n){"use strict";var t,e,o,s,c,r,l,i;return{setters:[function(n){t=n.defineProperty,e=n.inheritsLoose,o=n.createClass},function(n){s=n.cclegacy,c=n._decorator,r=n.Component},function(n){l=n.AIBase},function(n){i=n.TestAI_close}],execute:function(){var u,a,p;s._RF.push({},"adb81ie1SVAVZ/KzbjSNYmq","ModalAITool",void 0);var f=c.ccclass;c.property,n("ModalAITool",f("ModalAITool")((p=a=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var s=t.prototype;return s.start=function(){},s.onTestAI=function(n){return null==n.getComponent(l)?n.addComponent(i):null},o(t,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new t),this.instance}}]),t}(r),t(a,"instance",null),u=p))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/NumberStringTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,o,i,s,c;return{setters:[function(t){e=t.defineProperty,n=t.inheritsLoose,r=t.createClass},function(t){o=t.cclegacy,i=t._decorator,s=t.js,c=t.Component}],execute:function(){var u,a,l;o._RF.push({},"ae598JFEllMxqg2YaoWqLGC","NumberStringTool",void 0);var f=i.ccclass;i.property,t("NumberStringTool",f("NumberStringTool")((l=a=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){},o.formatNumberToString=function(t){return t>=1e6?s.formatStr("%sB",Math.ceil(t/1e9)):t>=1e6?s.formatStr("%sM",Math.ceil(t/1e6)):t>=1e3?s.formatStr("%sK",Math.ceil(t/1e3)):t.toString()},r(e,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}(c),e(a,"instance",null),u=l))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/mouseTest.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UserDataManager.ts","./AIBase.ts","./GameLogicData.ts","./GameManager.ts"],(function(e){"use strict";var t,o,n,i,a,r,s,l,c,h,u,d,m,y,g,f,p,T,N,v,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.defineProperty},function(e){r=e.cclegacy,s=e._decorator,l=e.Camera,c=e.Node,h=e.geometry,u=e.systemEvent,d=e.SystemEvent,m=e.PhysicsSystem,y=e.Layers,g=e.Vec3,f=e.MeshRenderer,p=e.Component},function(e){T=e.default},function(e){N=e.AIBase},function(e){v=e.default},function(e){C=e.default}],execute:function(){var P,R,b,S,_,E,I;r._RF.push({},"af03fTPWGRKFIkXIMV0Kw+5","mouseTest",void 0);var L=s.ccclass,B=s.property;e("mouseTest",(P=L("mouseTest"),R=B({type:l}),b=B({type:c}),P((E=t((_=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(i(t),"mainCamera",E,i(t)),n(i(t),"teamRootNode",I,i(t)),a(i(t),"ray",new h.Ray),a(i(t),"move_ray",new h.Ray),a(i(t),"touchNode",null),a(i(t),"curchangeTile",null),a(i(t),"touchStartPos",null),t}o(t,e);var r=t.prototype;return r.onLoad=function(){console.log("初始化鼠标点击。。。"),u.on(d.EventType.TOUCH_START,this.onTouchStart,this),u.on(d.EventType.TOUCH_MOVE,this.onTouchMove,this),u.on(d.EventType.TOUCH_END,this.onTouchEnd,this)},r.start=function(){},r.getShapePosNode=function(e){return this.teamRootNode.getChildByName(e)},r.onTouchStart=function(e){if(!v.Instance.bGameStart&&(console.log("检查鼠标点击。。。"),this.mainCamera.screenPointToRay(e.getLocationX(),e.getLocationY(),this.ray),m.instance.raycast(this.ray)))for(var t=m.instance.raycastResults,o=0;o<t.length;o++){var n=t[o];if(console.log("检测物体:"+n.collider.node.name+" Layer:"+n.collider.node.layer),n.collider.node.layer==y.nameToLayer("editorShape")){console.log("点击了物体:"+n.collider.node.layer);var i=n.collider.node;this.touchNode=i;var a=this.touchNode.getChildByName("outline");null!=a&&(a.active=!0)}}},r.onTouchMove=function(e){if(null!=this.touchNode&&(this.mainCamera.screenPointToRay(e.getLocationX(),e.getLocationY(),this.move_ray),m.instance.raycast(this.move_ray)))for(var t=m.instance.raycastResults,o=0;o<t.length;o++){var n=t[o];if("Cube"==n.collider.node.name)this.touchNode.setWorldPosition(new g(n.hitPoint.x,n.hitPoint.y,n.hitPoint.z));else if(n.collider.node.layer==y.nameToLayer("editorTile")&&this.curchangeTile!=n.collider.node){if(null!=this.curchangeTile)this.curchangeTile.getChildByName("select").getComponent(f).enabled=!1;this.curchangeTile=n.collider.node,console.log("当前切换位置:"+this.curchangeTile.name),this.curchangeTile.getChildByName("select").getComponent(f).enabled=!0}}},r.onTouchEnd=function(e){if(null!=this.touchNode){var t=this.touchNode.getChildByName("outline");if(null!=t&&(t.active=!1),null!=this.touchNode&&null!=this.curchangeTile){var o=this.getShapePosNode(this.curchangeTile.name);if(0==o.children.length){var n=Number.parseInt(this.touchNode.parent.name);this.touchNode.parent=o,this.touchNode.setPosition(g.ZERO);var i=Number.parseInt(o.name);T.Instance.changeShapePos(n,i)}else{var a=o.children[0],r=a.getComponent(N),s=this.touchNode.getComponent(N);s._team==r._team&&s.thismodalId==r.thismodalId&&this.touchNode!=a&&C.Instance.onCombalShape(this.touchNode,a)||this.touchNode.setPosition(g.ZERO)}}else this.touchNode.setPosition(g.ZERO);if(null!=this.curchangeTile)this.curchangeTile.getChildByName("select").getComponent(f).enabled=!1,this.curchangeTile=null;this.touchNode=null}},t}(p)).prototype,"mainCamera",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(_.prototype,"teamRootNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=_))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameGlobConfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var o,t,i,e;return{setters:[function(n){o=n.createClass,t=n.defineProperty},function(n){i=n.cclegacy,e=n.loader}],execute:function(){i._RF.push({},"b101bEOm7hFxrQuufpiyydR","GameGlobConfig",void 0);var s=function(){t(this,"ID",void 0),t(this,"Value",void 0)},r=n("default",function(){function n(){t(this,"Configs",null),t(this,"configLoad",!1)}var i=n.prototype;return i.onLoad=function(){this.Configs=new Array;var n=this;e.loadRes("config/GameGlobConfig.json",(function(o,t){console.log(t);var i=t,e=i.json;if(Array.isArray(e)){var r=Array.from(e);console.log(r.length);for(var a=0;a<r.length;a++){var u=new s;u.ID=i.json[a].ID,u.Value=i.json[a].value,n.Configs.push(u)}n.configLoad=!0}}))},i.Get=function(n){for(var o=0;o<this.Configs.length;o++)if(this.Configs[o].ID==n)return this.Configs[o];return null},o(n,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new n),this.instance}}]),n}());t(r,"instance",null),i._RF.pop()}}}));

System.register("chunks:///_virtual/uiSystemSet.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UserDataManager.ts"],(function(e){"use strict";var n,t,o,i,a,r,s,l,c,u,b,g,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.Node,l=e.Toggle,c=e.UIOpacity,u=e.Vec3,b=e.tween,g=e.Component},function(e){f=e.default}],execute:function(){var p,d,h,y,v,m,I,S,T,w,C,k,E;a._RF.push({},"b777crRkWpJl7CRoE3Vwfmm","uiSystemSet",void 0);var V=r.ccclass,z=r.property;e("uiSystemSet",(p=V("uiSystemSet"),d=z({type:s}),h=z({type:l}),y=z({type:l}),v=z({type:s}),m=z({type:s}),p((T=n((S=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,o(i(n),"AniPanel",T,i(n)),o(i(n),"soundToggle",w,i(n)),o(i(n),"vibraToggle",C,i(n)),o(i(n),"soundToggleoff",k,i(n)),o(i(n),"vibraToggleoff",E,i(n)),n}t(n,e);var a=n.prototype;return a.start=function(){var e=this.node.getComponent(c);e.opacity=0,this.node.scale=new u(.4,.4,.4),b(e).to(.3,{opacity:255}).start(),b(this.node).to(.4,{scale:new u(1,1,1)},{easing:"backOut"}).start(),this.onRefresh()},a.onClose=function(){var e=this,n=this.node.getComponent(c);b(n).to(.3,{opacity:0}).start(),b(this.node).to(.4,{scale:new u(.4,.4,.4)},{easing:"backIn",onComplete:function(){e.node.active=!1}}).start(),f.Instance.saveData()},a.onEnable=function(){var e=this.node.getComponent(c);e.opacity=0,this.node.scale=new u(.4,.4,.4),b(e).to(.3,{opacity:255}).start(),b(this.node).to(.4,{scale:new u(1,1,1)},{easing:"backOut"}).start(),this.onRefresh()},a.onRefresh=function(){this.soundToggle.isChecked=f.Instance.bSoundEnabel,this.vibraToggle.isChecked=f.Instance.bVibration,this.soundToggleoff.active=!f.Instance.bSoundEnabel,this.vibraToggleoff.active=!f.Instance.bVibration,console.log("当前音效开关:"+f.Instance.bSoundEnabel)},a.onClickSound=function(){f.Instance.bSoundEnabel=!f.Instance.bSoundEnabel,this.soundToggleoff.active=!f.Instance.bSoundEnabel,console.log("当前音效开关:"+f.Instance.bSoundEnabel)},a.onClickvibraTo=function(){f.Instance.bVibration=!f.Instance.bVibration,this.vibraToggleoff.active=!f.Instance.bVibration,console.log("当前振动开关:"+f.Instance.bVibration)},n}(g)).prototype,"AniPanel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(S.prototype,"soundToggle",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(S.prototype,"vibraToggle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(S.prototype,"soundToggleoff",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(S.prototype,"vibraToggleoff",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=S))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/uiMain.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UserDataManager.ts","./NumberStringTool.ts","./ReferenceCollector.ts","./ShapeConfig.ts","./GameModule.ts"],(function(e){"use strict";var t,n,o,r,i,a,l,s,u,c,g,p,b,f,y,v,h,d,m,w,C,_,S,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.defineProperty},function(e){a=e.cclegacy,l=e._decorator,s=e.Node,u=e.Event,c=e.Label,g=e.UIOpacity,p=e.Vec3,b=e.tween,f=e.ProgressBar,y=e.Color,v=e.resources,h=e.SpriteFrame,d=e.Sprite,m=e.Component},function(e){w=e.default},function(e){C=e.NumberStringTool},function(e){_=e.ReferenceCollector},function(e){S=e.default},function(e){x=e.GameModule}],execute:function(){var P,N,R,z,E,G,I,L,F,D,M,B,H,A,T,O,k,Z,U,j,q,J,V,W,X,Y,K;a._RF.push({},"bd81a0b3kNJoZSHrYpPDqXs","uiMain",void 0);var Q=l.ccclass,$=l.property;e("uiMain",(P=Q("uiMain"),N=$({type:s}),R=$({type:s}),z=$({type:s}),E=$({type:s}),G=$({type:s}),I=$({type:s}),L=$({type:s}),F=$({type:s}),D=$({type:s}),M=$({type:s}),B=$({type:s}),H=$({type:s}),P((O=t((T=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,o(r(t),"txtLevel",O,r(t)),o(r(t),"txtGold",k,r(t)),o(r(t),"txtbuylong",Z,r(t)),o(r(t),"txtbuygong",U,r(t)),o(r(t),"btnbuylong_Free",j,r(t)),o(r(t),"btnbuygong_Free",q,r(t)),o(r(t),"process_level",J,r(t)),o(r(t),"uiSystemSet",V,r(t)),o(r(t),"newCardPanel",W,r(t)),o(r(t),"btnshapeList",X,r(t)),o(r(t),"lay_lv_bar",Y,r(t)),o(r(t),"tst_ps",K,r(t)),i(r(t),"lv",0),t}n(t,e);var a=t.prototype;return a.start=function(){},a.onCreateNewLong=function(){var e=new u("create_long",!0);this.node.dispatchEvent(e)},a.onCreateNewGong=function(){var e=new u("create_gong",!0);this.node.dispatchEvent(e)},a.OnRefreshLevel=function(){this.txtLevel.getComponent(c).string=w.Instance.curLevelId.toString();var e=this.lay_lv_bar.getComponentsInChildren(g);this.lv=w.Instance.levelcount,console.log("-----\x3eRefresh level:",this.lv);for(var t=0;t<e.length;t++){var n=e[t];t>this.lv?n.node.active=!1:t==this.lv&&(n.opacity=0,n.node.scale=new p(3,3,3),n.node.active=!0,b(n).to(.5,{opacity:255}).start(),b(n.node).to(.5,{scale:new p(1,1,1)}).start())}console.log("-----\x3eRefresh level now:",this.lv),this.process_level.getComponent(f).progress=w.Instance.levelcount/10},a.onRefreshGold=function(){var e=w.Instance.goldcount;this.txtGold.getComponent(c).string=C.Instance.formatNumberToString(e);var t=w.Instance.GetBuyLongPrice();this.txtbuylong.getComponent(c).string=C.Instance.formatNumberToString(t),this.txtbuylong.getComponent(c).color=e>=t?y.GREEN:y.RED,this.btnbuylong_Free.active=t>e;var n=w.Instance.GetBuyGongPrice();this.txtbuygong.getComponent(c).string=C.Instance.formatNumberToString(n),this.txtbuygong.getComponent(c).color=e>=n?y.GREEN:y.RED,this.btnbuygong_Free.active=n>e},a.onCreateNewLong_AD=function(){var e=new u("create_long_free",!0);this.node.dispatchEvent(e)},a.onCreateNewGong_AD=function(){var e=new u("create_gong_free",!0);this.node.dispatchEvent(e)},a.onBattleStart=function(e,t){var n=new u("gamestart_event",!0);this.node.dispatchEvent(n)},a.onOpenuiSystemSet=function(){x.ReplayParticl(this.tst_ps),this.uiSystemSet.active=!0},a.initHead=function(e,t){console.log("加载图片资源:"+e),v.load(e,h,(function(e,n){e?console.log(e.message||e):t.spriteFrame=n}))},a.onNewCardAni=function(e,t){var n=S.Instance.Get(e),o=this.newCardPanel.getComponent(_).get("template_head"),r=o.getComponent(_);o.getChildByPath("active").active=!0,o.getChildByPath("unactive").active=!1,r.get("name").getComponent(c).string=n.Name,r.get("txtAtk").getComponent(c).string=n.Atk.toString(),r.get("txtHp").getComponent(c).string=n.Hp.toString();var i=r.get("icon"),a="Head/"+n.icon+"/spriteFrame";this.initHead(a,i.getComponent(d)),this.newCardPanel.active=!0,this.newCardPanel.setWorldPosition(t),this.newCardPanel.setScale(new p(2,2,1)),b(this.newCardPanel).to(.6,{scale:p.ZERO,position:p.ZERO}).start(),b(this.btnshapeList).delay(.7).to(.15,{scale:new p(1.2,1.2,1)}).to(.15,{scale:new p(.8,.8,1)}).to(.15,{scale:new p(1.1,1.1,1)}).to(.15,{scale:new p(1,1,1)}).start()},t}(m)).prototype,"txtLevel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(T.prototype,"txtGold",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(T.prototype,"txtbuylong",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(T.prototype,"txtbuygong",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(T.prototype,"btnbuylong_Free",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(T.prototype,"btnbuygong_Free",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(T.prototype,"process_level",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(T.prototype,"uiSystemSet",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(T.prototype,"newCardPanel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(T.prototype,"btnshapeList",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(T.prototype,"lay_lv_bar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(T.prototype,"tst_ps",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=T))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/BaseBattleData.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,s;return{setters:[function(t){e=t.defineProperty},function(t){a=t.cclegacy,s=t._decorator}],execute:function(){var r;a._RF.push({},"be2503yIdtJZbF6gfvbTvMf","BaseBattleData",void 0);var c=s.ccclass;s.property,t("BaseBattleData",c("BaseBattleData")(r=function(){e(this,"strPrefab",void 0),e(this,"baseIndex",void 0)})||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/TestAI_close.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AIBase.ts","./GameLogicData.ts"],(function(t){"use strict";var e,i,o,s,n,a,c,r;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,a=t.Vec3},function(t){c=t.AIBase},function(t){r=t.default}],execute:function(){var l;s._RF.push({},"c20db9gKGVMM6j6TBE2jgkc","TestAI_close",void 0);var h=n.ccclass;n.property,t("TestAI_close",h("TestAI_close")(l=function(t){function s(){for(var e,s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(o(e),"TeamIndex",void 0),e}e(s,t);var n=s.prototype;return n.onLoad=function(){this.attactDis=2.5,this.attacktime=.5},n.start=function(){this.initAI(),this.playAction(0,!1),this.starttime=0},n.update=function(t){if(r.Instance.bGameStart)return null==this.targetNode?(this.onAI(),void this.lookAtObject()):void(this.IsDied()||(this._ismovestate?this.moveTo(t):this.onAttackAI(t)))},n.onAI=function(){this.targetNode=this.GetCloseTarget()},n.OnAttackAction=function(){a.distance(this.targetNode.getWorldPosition(),this.node.getWorldPosition())<=this.attactDis&&this.playAction(2,!1)},n.onAttack=function(){if(r.Instance.bGameStart&&null!=this.targetNode){var t=this.targetNode.getComponent(c);this.IsDied()||t.IsDied()||(console.log("计算近战攻击伤害！！！！"),t.onAttackCale(this))}},s}(c))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/modalActionTest.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,s,n,c,r,a,h,p,u,d,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.defineProperty},function(t){c=t.cclegacy,r=t._decorator,a=t.systemEvent,h=t.SystemEvent,p=t.Vec3,u=t.macro,d=t.SkeletalAnimation,l=t.Component}],execute:function(){var m,v,y;c._RF.push({},"cd0ac48/GFHEo2B9Kk/4uzS","modalActionTest",void 0);var f=r.ccclass,_=r.property;t("modalActionTest",f("modalActionTest")((y=e((v=function(t){function e(){for(var e,i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return e=t.call.apply(t,[this].concat(c))||this,o(s(e),"movespeed",y,s(e)),n(s(e),"_movedir",void 0),n(s(e),"left",void 0),n(s(e),"right",void 0),n(s(e),"up",void 0),n(s(e),"down",void 0),n(s(e),"ske_comp",void 0),n(s(e),"_curpos",void 0),e}i(e,t);var c=e.prototype;return c.onLoad=function(){this.left=!1,this.right=!1,this.up=!1,this.down=!1,a.on(h.EventType.KEY_DOWN,this.onKeyDown,this),a.on(h.EventType.KEY_UP,this.onKeyUp,this)},c.start=function(){this.onDance()},c.update=function(t){this._curpos=new p(this.node.position.x,this.node.position.y,this.node.position.z),this.left?this._curpos.x-=this.movespeed*t:this.right&&(this._curpos.x+=this.movespeed*t),this.down?this._curpos.z-=this.movespeed*t:this.up&&(this._curpos.z+=this.movespeed*t),this.node.setPosition(this._curpos)},c.onKeyDown=function(t){switch(t.keyCode){case u.KEY.a:this.left=!0;break;case u.KEY.d:this.right=!0;break;case u.KEY.w:this.up=!0;break;case u.KEY.s:this.down=!0}},c.onKeyUp=function(t){switch(t.keyCode){case u.KEY.a:this.left=!1;break;case u.KEY.d:this.right=!1;break;case u.KEY.w:this.up=!1;break;case u.KEY.s:this.down=!1}},c.onDance=function(){this.getComponent(d).play("mixamo.com")},c.play_spineboy_walk=function(){this.ske_comp.clearTrack(0),this.ske_comp.setAnimation(0,"mixamo.com",!0)},e}(l)).prototype,"movespeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=v))||m);c._RF.pop()}}}));

System.register("chunks:///_virtual/uiChangeBattle.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,o,a,s,r,c,u,l,h,p,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.defineProperty,o=t.assertThisInitialized,a=t.initializerDefineProperty},function(t){s=t.cclegacy,r=t._decorator,c=t.Node,u=t.Animation,l=t.UIOpacity,h=t.Vec3,p=t.tween,d=t.Component}],execute:function(){var f,g,w,y,v,C,m;s._RF.push({},"dffcfN1OolLcLaEPTN1KRTT","uiChangeBattle",void 0);var L=r.ccclass,b=r.property;t("uiChangeBattle",(f=L("uiChangeBattle"),g=b({type:c}),w=b({type:c}),f((C=e((v=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(o(e),"animation",void 0),a(o(e),"uiWin",C,o(e)),a(o(e),"uiLose",m,o(e)),i(o(e),"winResule",void 0),e}n(e,t);var s=e.prototype;return s.onLoad=function(){this.animation=this.node.getComponent(u)},s.start=function(){},s.onChangeShow=function(t){var e=this;this.winResule=t,console.log("onChangeShow");var n=this.node.getComponent(l);n.opacity=0;var i=this.node.getChildByPath("Mask");i.scale=new h(20,20,20),this.node.active=!0,p(n).to(.5,{opacity:255}).start(),p(i).to(.8,{scale:new h(1,1,1)},{easing:"quadOut",onComplete:function(){e.onShowEnd()}}).start()},s.onChangeHide=function(){var t=this,e=this.node.getComponent(l);p(e).to(.5,{opacity:0}).start();var n=this.node.getChildByPath("Mask");p(n).to(.8,{scale:new h(50,50,50)},{onComplete:function(){t.onHideEnd()}}).start()},s.onShowEnd=function(){console.log("onShowEnd",this.winResule),this.winResule?(this.uiWin.scale=new h(0,0,0),this.uiWin.active=!0,p(this.uiWin).to(.5,{scale:new h(1,1,1)},{easing:"backOut"}).start()):(this.uiLose.scale=new h(0,0,0),this.uiLose.active=!0,p(this.uiLose).to(.5,{scale:new h(1,1,1)},{easing:"backOut"}).start())},s.onHideEnd=function(){console.log("onHideEnd",this.winResule),this.node.active=!1},e}(d)).prototype,"uiWin",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(v.prototype,"uiLose",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=v))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/uiBattleLose.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UserDataManager.ts","./MulRewardConfig.ts","./NumberStringTool.ts","./uiChangeBattle.ts","./GameModule.ts"],(function(e){"use strict";var t,n,i,r,a,o,l,u,s,c,h,f,d,p,g,w,R,m,b,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.defineProperty},function(e){o=e.cclegacy,l=e._decorator,u=e.Node,s=e.Event,c=e.Label,h=e.RichText,f=e.js,d=e.Animation,p=e.Vec3,g=e.Component},function(e){w=e.default},function(e){R=e.default},function(e){m=e.NumberStringTool},function(e){b=e.uiChangeBattle},function(e){v=e.GameModule}],execute:function(){var y,C,M,B,A,G,L,T,x,I,N,P,z,D,E,S,k;o._RF.push({},"e3945Y6HktJ662hQkB8pGQB","uiBattleLose",void 0);var F=l.ccclass,_=l.property;e("uiBattleLose",(y=F("uiBattleLose"),C=_({type:u}),M=_({type:u}),B=_({type:u}),A=_({type:u}),G=_({type:u}),L=_({type:u}),T=_({type:u}),y((N=t((I=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(r(t),"uiChangeBattle",N,r(t)),i(r(t),"txtBaseReward",P,r(t)),i(r(t),"mulRewardArray",z,r(t)),i(r(t),"txtMulReward",D,r(t)),i(r(t),"btnNoThanks",E,r(t)),i(r(t),"txtGold",S,r(t)),i(r(t),"levelrewardEffect",k,r(t)),a(r(t),"curMulPer",0),a(r(t),"isMulAD",!1),t}n(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){this.onRefreshMulPer()},o.onRestart=function(){this.isMulAD||w.Instance.onLevelPassReward();var e=new s("onGameRestart",!0);this.node.dispatchEvent(e),this.node.active=!1,this.uiChangeBattle.active=!0,this.uiChangeBattle.getComponent(b).onChangeHide()},o.onRefresh=function(){this.txtBaseReward.getComponent(c).string=m.Instance.formatNumberToString(w.Instance.getcurLevelBaseLoseReward())},o.onRefreshGold=function(){var e=w.Instance.goldcount;this.txtGold.getComponent(c).string=m.Instance.formatNumberToString(e)},o.onRefreshMulPer=function(){var e=w.Instance.getcurLevelBaseReward(),t=this.mulRewardArray.eulerAngles.z,n=R.Instance.GetMulRewardCfg(t);if(null!=n){var i=Math.ceil(e*n.perRote);this.curMulPer=n.perRote;this.txtMulReward.getComponent(h).string=f.formatStr("<outline color=#0 width=2><color=#CCCC29>+%s</color></outline>",m.Instance.formatNumberToString(i))}},o.onEnable=function(){this.uiChangeBattle.active=!1,this.isMulAD=!1,this.onRefresh(),this.onRefreshGold(),this.mulRewardArray.parent.getComponent(d).play(),this.btnNoThanks.active=!1,this.schedule((function(){this.isMulAD||(this.btnNoThanks.active=!0)}),2,0,0)},o.onADMulReward=function(){this.mulRewardArray.parent.getComponent(d).stop(),this.onLevelRewardForMul()},o.onLevelRewardForMul=function(){v.ReplayParticl(this.levelrewardEffect),this.isMulAD=!0,this.onGetMulReward(),this.onRefreshGold(),this.btnNoThanks.active=!1,this.schedule((function(){this.onuiShowEnd()}),2,0,0)},o.onuiShowEnd=function(){if(this.node.active){v.FlyItem(new p(0,0),new p(414,879));var e=new s("onGameRestart",!0);this.node.dispatchEvent(e),this.node.active=!1,this.uiChangeBattle.active=!0,this.uiChangeBattle.getComponent(b).onChangeHide()}},o.onGetMulReward=function(){w.Instance.onLevelPassReward(this.curMulPer)},t}(g)).prototype,"uiChangeBattle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(I.prototype,"txtBaseReward",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"mulRewardArray",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"txtMulReward",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(I.prototype,"btnNoThanks",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(I.prototype,"txtGold",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(I.prototype,"levelrewardEffect",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=I))||x));o._RF.pop()}}}));

System.register("chunks:///_virtual/uiNewCard.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ReferenceCollector.ts","./ShapeConfig.ts","./uiMain.ts"],(function(e){"use strict";var t,i,n,o,r,a,c,s,u,l,d,p,h,f,g,C,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.defineProperty,o=e.assertThisInitialized,r=e.initializerDefineProperty},function(e){a=e.cclegacy,c=e._decorator,s=e.Node,u=e.Animation,l=e.Label,d=e.Sprite,p=e.resources,h=e.SpriteFrame,f=e.Component},function(e){g=e.ReferenceCollector},function(e){C=e.default},function(e){m=e.uiMain}],execute:function(){var v,y,b,w,N,S,j;a._RF.push({},"e3c8bUDN7xFcZadCv9CugL0","uiNewCard",void 0);var F=c.ccclass,H=c.property;e("uiNewCard",(v=F("uiNewCard"),y=H({type:s}),b=H({type:m}),v((S=t((N=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,n(o(t),"cardid",void 0),r(o(t),"headobj",S,o(t)),r(o(t),"uiMain",j,o(t)),t}i(t,e);var a=t.prototype;return a.start=function(){},a.onclose=function(){this.node.active=!1,this.uiMain.onNewCardAni(this.cardid,this.node.worldPosition)},a.onEnable=function(){this.onRefresh(),this.node.getComponent(u).play()},a.OnShowNewCard=function(e){this.cardid=e,this.node.active=!0},a.onRefresh=function(){var e=C.Instance.Get(this.cardid),t=this.headobj.getComponent(g);this.headobj.getChildByPath("active").active=!0,this.headobj.getChildByPath("unactive").active=!1,t.get("name").getComponent(l).string=e.Name,t.get("txtAtk").getComponent(l).string=e.Atk.toString(),t.get("txtHp").getComponent(l).string=e.Hp.toString();var i=t.get("icon"),n="Head/"+e.icon+"/spriteFrame";this.initHead(n,i.getComponent(d))},a.initHead=function(e,t){console.log("加载图片资源:"+e),p.load(e,h,(function(e,i){e?console.log(e.message||e):t.spriteFrame=i}))},t}(f)).prototype,"headobj",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(N.prototype,"uiMain",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=N))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/UserDataManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameGlobConfig.ts","./LevelConfig.ts","./GameTester.ts"],(function(e){"use strict";var t,n,s,i,a,o,r,l,u,h,c,d,p;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,s=e.defineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,r=e.Event,l=e.Node,u=e.find,h=e.Component},function(e){c=e.default},function(e){d=e.default},function(e){p=e.GameTester}],execute:function(){a._RF.push({},"efe2evUq3dJUbozhaqy9+I8","UserDataManager",void 0);o.ccclass,o.property;var v=function(){s(this,"id",void 0),s(this,"pos",void 0)},g=function(){s(this,"list_shapes",new Array),s(this,"curLevelId",0),s(this,"goldcount",0),s(this,"buy_long_Count",0),s(this,"buy_gong_count",0),s(this,"levelcount",0),s(this,"list_activeShape",new Array),s(this,"bSoundEnabel",!0),s(this,"bVibration",!0)},f=e("default",function(e){function a(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,s(i(t),"list_shapes",new Array),s(i(t),"list_activeShape",new Array),s(i(t),"curLevelId",1),s(i(t),"goldcount",0),s(i(t),"buy_long_Count",0),s(i(t),"buy_gong_count",0),s(i(t),"levelcount",0),s(i(t),"bSoundEnabel",!0),s(i(t),"bVibration",!0),s(i(t),"outlineTime",0),s(i(t),"recordKey","DragonRecord"),t}t(a,e);var o=a.prototype;return o.init=function(){p.Instance.clearrecord&&this.clearRecord(),this.loadBaseShape(),this.LoadData()},o.loadBaseShape=function(){for(var e=c.Instance.Get("1").Value.split(","),t=0;t<e.length;t++){var n=e[t].split("_"),s=new v;s.id=n[0],s.pos=Number.parseInt(n[1]),this.list_shapes.push(s),this.IsActiveShape(s.id)||this.list_activeShape.push(s.id),console.log("添加初始对象:"+s.id)}this.goldcount=Number.parseInt(c.Instance.Get("10").Value)},o.IsActiveShape=function(e){for(var t=0;t<this.list_activeShape.length;t++)if(this.list_activeShape[t]==e)return!0;return!1},o.getBaseShapes=function(){return this.list_shapes},o.addBaseShape=function(e,t){var n=new v;return n.id=e,n.pos=t,this.list_shapes.push(n),!this.IsActiveShape(n.id)&&(this.list_activeShape.push(n.id),!0)},o.changeShapePos=function(e,t){var n=this.getBaseShapeData(e);null!=n&&(n.pos=t),this.saveData()},o.delBaseShape=function(e){var t=this.getBaseShapeIndex(e);-1!=t&&this.list_shapes.splice(t,1)},o.getBaseShapeIndex=function(e){for(var t=0;t<this.list_shapes.length;t++)if(e==this.list_shapes[t].pos)return t;return-1},o.getBaseShapeData=function(e){for(var t=0;t<this.list_shapes.length;t++)if(e==this.list_shapes[t].pos)return this.list_shapes[t];return null},o.GetLevelMonsters=function(){return d.Instance.GetLevelMonster(this.curLevelId.toString())},o.onPassLevel=function(){this.curLevelId+=1,this.levelcount+=1,this.saveData()},o.onCaleGold=function(e){this.goldcount+=e;var t=new r("updateGold_event",!0);this.node.dispatchEvent(t),this.saveData()},o.onBuylong=function(){var e=this.GetBuyLongPrice();return this.goldcount>=e&&(this.buy_long_Count+=1,this.onCaleGold(-1*e),!0)},o.onBuygong=function(){var e=this.GetBuyGongPrice();return this.goldcount>=e&&(this.buy_gong_count+=1,this.onCaleGold(-1*e),!0)},o.GetBuyLongPrice=function(){var e=Number.parseInt(c.Instance.Get("4").Value),t=Number.parseFloat(c.Instance.Get("5").Value),n=Number.parseFloat(c.Instance.Get("6").Value),s=e+t*this.buy_long_Count+n*this.levelcount;return Math.ceil(s)},o.GetBuyGongPrice=function(){var e=Number.parseInt(c.Instance.Get("7").Value),t=Number.parseFloat(c.Instance.Get("8").Value),n=Number.parseFloat(c.Instance.Get("9").Value),s=e+t*this.buy_gong_count+n*this.levelcount;return Math.ceil(s)},o.getcurLevelBaseReward=function(){return d.Instance.Get(this.curLevelId.toString()).winReward},o.getcurLevelBaseLoseReward=function(){return d.Instance.Get(this.curLevelId.toString()).loseReward},o.onLevelPassReward=function(e){void 0===e&&(e=1);var t=Math.ceil(this.getcurLevelBaseReward()*e);this.onCaleGold(t)},o.onLevelLoseReward=function(e){void 0===e&&(e=1);var t=Math.ceil(this.getcurLevelBaseLoseReward()*e);this.onCaleGold(t)},o.clearRecord=function(){localStorage.removeItem(this.recordKey)},o.CheckOutLineReward=function(){if(0==this.outlineTime){var e=new Date;return this.outlineTime=e.getTime(),!1}var t=(e=new Date).getTime(),n=(this.outlineTime,Number.parseInt(c.Instance.Get("14").Value));return t-this.outlineTime>=n},o.onGiveOutlineReward=function(){var e=new Date;this.outlineTime=e.getTime()},o.saveData=function(){var e=new g;e.curLevelId=this.curLevelId,e.goldcount=this.goldcount;for(var t=0;t<this.list_shapes.length;t++){var n=this.list_shapes[t];e.list_shapes.push(JSON.stringify(n))}e.list_activeShape=this.list_activeShape,e.bSoundEnabel=this.bSoundEnabel,e.bVibration=this.bVibration;var s=JSON.stringify(e);localStorage.setItem(this.recordKey,s),console.log("用户数据保存！！"+s)},o.LoadData=function(){var e=localStorage.getItem(this.recordKey);if(null!=e){var t=JSON.parse(e);this.curLevelId=t.curLevelId,this.goldcount=t.goldcount,this.list_activeShape=t.list_activeShape,this.list_shapes.splice(0,this.list_shapes.length);for(var n=0;n<t.list_shapes.length;n++){var s=new v,i=JSON.parse(t.list_shapes[n]);s.id=i.id,s.pos=i.pos,this.list_shapes.push(s)}this.bVibration=t.bVibration,this.bSoundEnabel=t.bSoundEnabel,console.log("读取用户数据！！"+e)}},n(a,null,[{key:"Instance",get:function(){if(null==this.instance){var e=new l,t=u("Game");e.parent=t,e.name="UserDatamanager",this.instance=e.addComponent(a)}return this.instance}}]),a}(h));s(f,"instance",null),a._RF.pop()}}}));

System.register("chunks:///_virtual/NotificationCenter.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,r;return{setters:[function(t){e=t.createClass,n=t.defineProperty},function(t){i=t.cclegacy,r=t.EventTarget}],execute:function(){i._RF.push({},"f2ebf4Tf4ZGcbSIYQkt0O+V","NotificationCenter",void 0);var s=t("default",function(){function t(){n(this,"eventTarget",new r)}var i=t.prototype;return i.on=function(t,e,n){this.eventTarget.on(t,e,n)},i.dispatch=function(t,e){this.eventTarget.emit(t,t,e)},i.hasEventListener=function(t){return null!=this.eventTarget&&this.eventTarget.hasEventListener(t)},i.off=function(t,e,n){this.eventTarget.off(t,e,n)},e(t,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new t),this.instance}}]),t}());n(s,"instance",null),i._RF.pop()}}}));

System.register("chunks:///_virtual/GuideArray.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,o,i,a,c,l,s,u,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.CameraComponent,l=e.Node,s=e.Vec3,u=e.UITransform,p=e.Size,d=e.Component}],execute:function(){var y,f,h,m,v,b,g,w,z;i._RF.push({},"f2f62yoxXJPI5L4CduIVPsO","GuideArray",void 0);var N=a.ccclass,A=a.property;e("GuideArray",(y=N("GuideArray"),f=A({type:c}),h=A({type:l}),m=A({type:l}),y((g=t((b=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(o(t),"camera",g,o(t)),n(o(t),"StartNode",w,o(t)),n(o(t),"EndNode",z,o(t)),t}r(t,e);var i=t.prototype;return i.start=function(){this.initArray()},i.initArray=function(){var e=new s(0,0,0);this.camera.convertToUINode(this.StartNode.worldPosition,this.node.parent,e),this.node.position=e,console.log("获得箭头开始位置:"+e);var t=new s(0,0,0);this.camera.convertToUINode(this.EndNode.worldPosition,this.node.parent,t),console.log("获得箭头结束位置:"+t);var r=Math.abs(t.z-e.z);this.node.getComponent(u).contentSize=new p(32,100*r),console.log("获得箭头长度:"+r)},t}(d)).prototype,"camera",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(b.prototype,"StartNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(b.prototype,"EndNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/uiShapeList.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UserDataManager.ts","./ReferenceCollector.ts","./ShapeConfig.ts"],(function(e){"use strict";var t,n,i,o,a,r,l,c,s,g,u,p,h,f,v,d,m,y,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,c=e.instantiate,s=e.UIOpacity,g=e.tween,u=e.Vec3,p=e.Label,h=e.Sprite,f=e.resources,v=e.SpriteFrame,d=e.Component},function(e){m=e.default},function(e){y=e.ReferenceCollector},function(e){_=e.default}],execute:function(){var S,w,b,C,H,I,P,L,D,R,F,k,z;a._RF.push({},"f5f34jHqPFF2YRRrljQjoXd","uiShapeList",void 0);var B=r.ccclass,G=r.property;e("uiSHapeList",(S=B("uiSHapeList"),w=G({type:l}),b=G({type:l}),C=G({type:l}),H=G({type:l}),I=G({type:l}),S((D=t((L=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(o(t),"Scrollview_long",D,o(t)),i(o(t),"content_long",R,o(t)),i(o(t),"Scrollview_gong",F,o(t)),i(o(t),"content_gong",k,o(t)),i(o(t),"template_head",z,o(t)),t}n(t,e);var a=t.prototype;return a.start=function(){this.initPanel()},a.RefreshLongHead=function(){for(var e=_.Instance.GetLongShapes(),t=0;t<e.length;t++){var n=this.content_long.getChildByName(e[t].ID);null==n&&((n=c(this.template_head)).active=!0,n.parent=this.content_long,n.name=e[t].ID),this.refreshTemplateHead(n,e[t].ID)}},a.RefreshGongHead=function(){for(var e=_.Instance.GetGongShapes(),t=0;t<e.length;t++){var n=this.content_gong.getChildByName(e[t].ID);null==n&&((n=c(this.template_head)).active=!0,n.parent=this.content_gong,n.name=e[t].ID),this.refreshTemplateHead(n,e[t].ID)}},a.onEnable=function(){this.RefreshLongHead(),this.RefreshGongHead()},a.closePage=function(){var e=this,t=this.node.getComponent(s);g(t).to(.3,{opacity:0}).start(),g(this.node).to(.4,{scale:new u(.4,.4,.4)},{easing:"backIn",onComplete:function(){e.node.active=!1}}).start()},a.showPage=function(){var e=this.node.getComponent(s);e.opacity=0,this.node.scale=new u(.4,.4,.4),this.node.active=!0,g(e).to(.3,{opacity:255}).start(),g(this.node).to(.4,{scale:new u(1,1,1)},{easing:"backOut"}).start()},a.refreshTemplateHead=function(e,t){var n=_.Instance.Get(t),i=e.getComponent(y);if(m.Instance.IsActiveShape(t)){e.getChildByPath("active").active=!0,e.getChildByPath("unactive").active=!1,i.get("name").getComponent(p).string=n.Name,i.get("txtAtk").getComponent(p).string=n.Atk.toString(),i.get("txtHp").getComponent(p).string=n.Hp.toString();var o=i.get("icon"),a="Head/"+n.icon+"/spriteFrame";this.initHead(a,o.getComponent(h))}else{e.getChildByPath("active").active=!1,e.getChildByPath("unactive").active=!0;o=i.get("lockicon"),a="Head/"+n.lockicon+"/spriteFrame";this.initHead(a,o.getComponent(h))}},a.SwitchLongPanel=function(){this.Scrollview_long.active=!0,this.Scrollview_gong.active=!1},a.SwitchGongPanel=function(){this.Scrollview_long.active=!1,this.Scrollview_gong.active=!0},a.initPanel=function(){this.SwitchLongPanel()},a.initHead=function(e,t){console.log("加载图片资源:"+e),f.load(e,v,(function(e,n){e?console.log(e.message||e):t.spriteFrame=n}))},t}(d)).prototype,"Scrollview_long",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(L.prototype,"content_long",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"Scrollview_gong",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(L.prototype,"content_gong",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(L.prototype,"template_head",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=L))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/ReferenceCollector.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,o,i,c,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,s=e.Node,l=e.Component}],execute:function(){var a,u,f,p,h;i._RF.push({},"fa81af53dZBE4wqtJAqJViV","ReferenceCollector",void 0);var y=c.ccclass,d=c.property;e("ReferenceCollector",(a=y("ReferenceCollector"),u=d({type:s}),a((h=t((p=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,n(o(t),"Objs",h,o(t)),t}r(t,e);var i=t.prototype;return i.start=function(){},i.get=function(e){for(var t=0;t<this.Objs.length;t++)if(this.Objs[t].name==e)return this.Objs[t];return null},i.DestroyNode=function(){this.node.destroy()},t}(l)).prototype,"Objs",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=p))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameTester.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,i,o,a,c,s,l;return{setters:[function(e){t=e.defineProperty,r=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){c=e.cclegacy,s=e._decorator,l=e.Component}],execute:function(){var u,p,f,y,d,h,m;c._RF.push({},"fb04cpGB9dJ5ZoRGnSB1X4d","GameTester",void 0);var v=s.ccclass,g=s.property;e("GameTester",(u=v("GameTester"),p=g({type:Boolean}),u((m=h=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,i(o(t),"clearrecord",d,o(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){t.instance=this},r.start=function(){},a(t,null,[{key:"Instance",get:function(){return this.instance}}]),t}(l),t(h,"instance",null),d=r((y=m).prototype,"clearrecord",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=y))||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/moveTotarget.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AIBase.ts"],(function(t){"use strict";var e,o,i,r,n,s,a,l,d,c,u,g,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.defineProperty},function(t){s=t.cclegacy,a=t._decorator,l=t.Node,d=t.Vec3,c=t.v2,u=t.v3,g=t.Component},function(t){h=t.AIBase}],execute:function(){var p,v,m,f,y,P,_;s._RF.push({},"fbeebrg3gRNpoxYxlzdqZJq","moveTotarget",void 0);var N=a.ccclass,b=a.property;t("moveTotarget",(p=N("moveTotarget"),v=b({type:l}),m=b({type:l}),p((P=e((y=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,i(r(e),"targetNode",P,r(e)),i(r(e),"srcNode",_,r(e)),n(r(e),"_movedir",d.ZERO),n(r(e),"movespeed",0),n(r(e),"_ismovestate",!1),e}o(e,t);var s=e.prototype;return s.start=function(){this.lookAtObject(),this._ismovestate=!0},s.update=function(t){this._ismovestate&&this.moveTo(t)},s.lookAtObject=function(){var t=this.targetNode.getWorldPosition().x-this.node.getWorldPosition().x,e=this.targetNode.getWorldPosition().z-this.node.getWorldPosition().z,o=c(t,e).signAngle(c(0,1))/Math.PI*180;this._movedir=new d(0,o,0),this.node.setRotationFromEuler(this._movedir),this._movedir=this._movedir.normalize()},s.moveTo=function(t){if(d.distance(this.targetNode.getWorldPosition(),this.node.getWorldPosition())>2){var e=this.targetNode.getWorldPosition().x-this.node.getWorldPosition().x,o=this.targetNode.getWorldPosition().z-this.node.getWorldPosition().z,i=u(e,0,o).multiplyScalar(this.movespeed);this.node.position=this.node.position.add(i.multiplyScalar(t))}else this.onAtteck(),this._ismovestate=!1,this.node.destroy()},s.onAtteck=function(){var t=this.targetNode.getComponent(h),e=this.srcNode.getComponent(h);t.IsDied()||e.IsDied()||(console.log("计算远程攻击伤害"),t.onAttackCale(e))},e}(g)).prototype,"targetNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(y.prototype,"srcNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameGlobConfig.ts","./LevelConfig.ts","./GameTester.ts","./UserDataManager.ts","./MulRewardConfig.ts","./NumberStringTool.ts","./uiChangeBattle.ts","./ReferenceCollector.ts","./ShapeBarTest.ts","./ShapeConfig.ts","./SKillConfig.ts","./SoundManager.ts","./AIBase.ts","./TestConfig.ts","./GameLogicData.ts","./JsbTool.ts","./uiMain.ts","./uiNewCard.ts","./GameManager.ts","./ResManager.ts","./BaseComponent.ts","./GameModule.ts","./uiBattleWin.ts","./SoundTool.ts","./moveTotarget.ts","./TestAI_Long.ts","./uiOutLineReward.ts","./shou.ts","./TestAI_close.ts","./ModalAITool.ts","./mouseTest.ts","./uiSystemSet.ts","./BaseBattleData.ts","./modalActionTest.ts","./uiBattleLose.ts","./NotificationCenter.ts","./GuideArray.ts","./uiShapeList.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});